<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"> 
    <h:head>
        <meta charset="utf-8" />
        <title>Accueil</title>
        <f:facet name="middle">
            <h:outputStylesheet library="default" name="css/style.css"  />
            <h:outputStylesheet library="default" name="bootstrap/css/bootstrap.min.css" />
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" />
            <h:outputScript name="bootstrap/js/bootstrap.js" />
        </f:facet>
    </h:head>
    <h:body>
        <ui:include src="../include/header.xhtml" />
        <div class="container">  
            <div class="page-header">

                <h1>Liste des taches :</h1>
            </div>
            <c:choose>
                <c:when test="#{suptaskBean.isLogged}">
                    <div class="row">
                        <div class="col-md-12">
                            <h:form>
                                <h:dataTable var="p" value="#{suptaskBean.findUserTasks()}" class="table">
                                    <h:column>
                                        <f:facet name="header">Id</f:facet>
                                        <h:outputText value="#{p.id}"></h:outputText>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">Title</f:facet>
                                        <h:outputText value="#{p.title}"></h:outputText>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">Description</f:facet>
                                        <h:outputText value="#{p.description}"></h:outputText>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">Due time</f:facet>
                                        <h:outputText value="#{p.dueTime}"></h:outputText>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">Priority</f:facet>
                                        <h:outputText value="#{p.priority}"></h:outputText>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">Attribué à</f:facet>
                                        <h:outputText value="#{p.user.username}"></h:outputText>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">Projet</f:facet>
                                        <h:outputText value="#{p.project.title}"></h:outputText>
                                    </h:column>
                                </h:dataTable>
                            </h:form>

                        </div>
                    </div>
                </c:when>
                <c:otherwise>
                    <div class="page-header">
                        <h1>Bienvenue sur SupTask</h1>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            Utilisateur non connecté.
                            <br/>
                            <b>
                                <h:link value="Connectez-vous" outcome="/site/login.xhtml" class="text-uppercase text-smallcaps"/>
                            </b>
                        </div>
                        <div class="col-md-10">
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum ac mauris ac diam vulputate tincidunt eget sed quam. Quisque lectus felis, ornare vel nibh elementum, ultricies tincidunt felis. In gravida turpis mi, in dignissim erat posuere id. Curabitur eu vestibulum sem. Nam tempor turpis tincidunt lorem vulputate sodales. Curabitur ultrices fermentum mi ac faucibus. Nam vel lorem ante. Nam tempus orci et elit dignissim, sit amet pulvinar ex tincidunt. Nullam ex est, congue et orci id, feugiat pretium lectus. Morbi vitae neque felis. Proin ornare justo nec lectus hendrerit sollicitudin. Aliquam in nulla auctor, pretium sapien nec, rhoncus justo. Vivamus auctor tempus purus, id tempor purus cursus vitae. Sed at tellus vel ex varius eleifend vitae id ligula.
                        </div>
                        <div class="col-md-12">
                            <br/>
                            Nullam tristique vulputate elit dapibus molestie. Quisque mauris metus, placerat vitae purus non, tempus tincidunt nibh. Praesent malesuada pellentesque orci nec cursus. Etiam vitae libero in nisl ornare volutpat. Donec finibus dignissim mi vitae suscipit. Maecenas sed ligula facilisis, eleifend ligula et, fermentum turpis. Morbi vestibulum egestas convallis. Nullam scelerisque elementum efficitur.
                        </div>
                    </div>
                </c:otherwise>
            </c:choose>  
        </div>
    </h:body>
</html>